YUI.add("ellipsis",function(a){a.DOM.ellipsis=function(c,i){i=i||{};a.mix(i,{ellipsis:" ...",fudge:0,lines:1});var h=a.one(c),e=h.getAttribute("originalText")||h.get("text"),f=e.length,d=f,k=a.one(document.createElement(h.get("nodeName"))),l,g,b;k.setStyles({overflow:"hidden",position:"absolute",visibility:"hidden",display:"block",bottom:"-10px",right:"-10px",width:h.getComputedStyle("width"),fontSize:h.getComputedStyle("fontSize"),fontFamily:h.getComputedStyle("fontFamily"),fontWeight:h.getComputedStyle("fontWeight"),letterSpacing:h.getComputedStyle("letterSpacing"),lineHeight:h.getComputedStyle("lineHeight")});k.set("text","some sample text");a.one("body").append(k);l=parseInt(k.getComputedStyle("height"));k.setStyle("overflow","visible");g=i.lines*l;k.set("text",e);b=parseInt(k.getComputedStyle("height"));if(b<=g){k.remove();return;}for(var j;d>=1;){d=Math.floor(d/2);f+=b>g?-d:+d;k.set("text",e.slice(0,f-i.ellipsis.length)+i.ellipsis);b=parseInt(k.getComputedStyle("height"));if(b<=g){j=f;}}k.remove();if(!h.getAttribute("originalText")){h.setAttribute("originalText",e);}h.set("text",e.slice(0,j-i.ellipsis.length-i.fudge)+i.ellipsis);return h;};a.Node.importMethod(a.DOM,"ellipsis");a.NodeList.importMethod(a.Node.prototype,"ellipsis");},"0.0.1",{requires:["base","node"]});