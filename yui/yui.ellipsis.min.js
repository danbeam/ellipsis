/**
* Ellipsis plugin (YUI) - For when text is too l ...
*
* @fileOverview  A slightly smarter way of truncating text
* @author        Dan Beam <dan@danbeam.org>
* @param         {object} conf - configuration objects to override the defaults
* @return        {Node} the Node passed to the method
*
* Copyright (c) 2010 Dan Beam
* Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/
;YUI.add("ellipsis",function(g){var d=0.01,f=function(i,h){return Math.abs(i-h)<=d;},b=function(i,h){return i-h>=d;},e=function(i,h){return i-h<=d;},c=false,a={"white-space":"nowrap",overflow:"hidden"};g.DOM.ellipsis=function(j,p){p=p||{};g.mix(p,{ellipsis:"\u2026",fudge:3,lines:1,remember:true,"native":true});var o=g.one(j),h="ellipsis-original-text",l=p.remember&&o.getData(h)||o.get("text"),m=l.length,k=m,r=g.one(document.createElement(o.get("nodeName"))),s,n,i,q;r.setStyles({overflow:"hidden",position:"absolute",visibility:"hidden",display:"block",bottom:"-10px",right:"-10px",width:o.getComputedStyle("width"),fontSize:o.getComputedStyle("fontSize"),fontFamily:o.getComputedStyle("fontFamily"),fontWeight:o.getComputedStyle("fontWeight"),letterSpacing:o.getComputedStyle("letterSpacing"),lineHeight:o.getComputedStyle("lineHeight")});r.set("text","some sample text");g.one("body").append(r);s=parseFloat(r.getComputedStyle("height"),10);if(g.DOM.ellipsis.nativeSupport&&p["native"]&&1==p.lines&&"\u2026"===p.ellipsis){o.setStyles(a);o.setStyle("height",s+"px");r.remove();return;}r.setStyle("overflow","visible");n=p.lines*s;r.set("text",l);i=parseFloat(r.getComputedStyle("height"),10);if(e(i,n)&&l.length===o.get("text").length){r.remove();return;}for(;k>=1;){k=Math.floor(k/2);m+=b(i,n)?-k:+k;r.set("text",l.slice(0,m-p.ellipsis.length)+p.ellipsis);i=parseFloat(r.getComputedStyle("height"),10);if(f(i,n)||e(i,n)){q=m;}}r.remove();if(p.remember&&!o.getData(h)){o.setData(h,l);}if(l.length===(r.get("text").length-p.ellipsis.length)){o.set("text",l);}else{if("undefined"!==typeof q){o.set("text",l.slice(0,q-p.ellipsis.length-p.fudge)+p.ellipsis);}}return o;};g.Node.importMethod(g.DOM,"ellipsis");g.NodeList.importMethod(g.Node.prototype,"ellipsis");g.on("domready",function(){var h,i=g.Node.create('<div style="visibility:hidden;position:absolute;white-space:nowrap;overflow:hidden;"></div>'),j=["textOverflow","OTextOverflow"];g.each(j,function(k){i.setStyle(k,"ellipsis");});g.one("body").appendChild(i);h=i.cloneNode(true);g.some(j,function(k){if("ellipsis"===h.getStyle(k)){c=k;a[c]="ellipsis";g.DOM.ellipsis.nativeSupport=true;return true;}});i.remove();i=h=null;});},"@VERSION@",{requires:["base","node"]});