/**
* Ellipsis plugin (YUI) - For when text is too l ...
*
* @fileOverview  A slightly smarter way of truncating text
* @author        Dan Beam <dan@danbeam.org>
* @param         {object} conf - configuration objects to override the defaults
* @return        {Node} the Node passed to the method
*
* Copyright (c) 2010 Dan Beam
* Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/
;YUI.add("ellipsis",function(f){var c=0.01,e=function(h,g){return Math.abs(h-g)<=c;},a=function(h,g){return h-g>=c;},d=function(h,g){return h-g<=c;},b=false;f.DOM.ellipsis=function(i,o){o=o||{};f.mix(o,{ellipsis:"\u2026",fudge:3,lines:1,remember:true,"native":true});if(f.DOM.ellipsis.nativeSupport&&o["native"]&&1==o.lines&&"\u2026"===o.ellipsis){var s={"white-space":"nowrap",overflow:"hidden"};s[b]="ellipsis";f.one(i).setStyles(s);return;}var n=f.one(i),g="ellipsis-original-text",k=o.remember&&n.getData(g)||n.get("text"),l=k.length,j=l,q=f.one(document.createElement(n.get("nodeName"))),r,m,h,p;q.setStyles({overflow:"hidden",position:"absolute",visibility:"hidden",display:"block",bottom:"-10px",right:"-10px",width:n.getComputedStyle("width"),fontSize:n.getComputedStyle("fontSize"),fontFamily:n.getComputedStyle("fontFamily"),fontWeight:n.getComputedStyle("fontWeight"),letterSpacing:n.getComputedStyle("letterSpacing"),lineHeight:n.getComputedStyle("lineHeight")});q.set("text","some sample text");f.one("body").append(q);r=parseFloat(q.getComputedStyle("height"),10);q.setStyle("overflow","visible");m=o.lines*r;q.set("text",k);h=parseFloat(q.getComputedStyle("height"),10);if(d(h,m)&&k.length===n.get("text").length){q.remove();return;}for(;j>=1;){j=Math.floor(j/2);l+=a(h,m)?-j:+j;q.set("text",k.slice(0,l-o.ellipsis.length)+o.ellipsis);h=parseFloat(q.getComputedStyle("height"),10);if(e(h,m)||d(h,m)){p=l;}}q.remove();if(o.remember&&!n.getData(g)){n.setData(g,k);}if(k.length===(q.get("text").length-o.ellipsis.length)){n.set("text",k);}else{if("undefined"!==typeof p){n.set("text",k.slice(0,p-o.ellipsis.length-o.fudge)+o.ellipsis);}}return n;};f.Node.importMethod(f.DOM,"ellipsis");f.NodeList.importMethod(f.Node.prototype,"ellipsis");f.on("domready",function(){var g,h=f.Node.create('<div style="visibility:hidden;position:absolute;white-space:nowrap;overflow:hidden;"></div>'),i=["textOverflow","OTextOverflow"];f.each(i,function(j){h.setStyle(j,"ellipsis");});f.one("body").appendChild(h);g=h.cloneNode(true);f.some(i,function(j){if("ellipsis"===g.getStyle(j)){b=j;return true;}});f.DOM.ellipsis.nativeSupport=!!b;h.remove();h=g=null;});},"@VERSION@",{requires:["base","node"]});