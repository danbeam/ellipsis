/**
* Ellipsis plugin (YUI) - For when text is too l ...
*
* @fileOverview  A slightly smarter way of truncating text
* @author        Dan Beam <dan@danbeam.org>
* @param         {object} conf - configuration objects to override the defaults
* @return        {Node} the Node passed to the method
*
* Copyright (c) 2010 Dan Beam
* Licensed under the MIT License: http://www.opensource.org/licenses/mit-license.php
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/
;YUI.add("ellipsis",function(a){a.DOM.ellipsis=function(e,k){k=k||{};a.mix(k,{ellipsis:" ...",fudge:1,lines:1});var j=a.one(e),g=j.getAttribute("originalText")||j.get("text"),h=g.length,f=h,n=a.one(document.createElement(j.get("nodeName"))),b=0.01,m=function(r,q){return Math.abs(r-q)<=b;},c=function(r,q){return r-q>=b;},o=function(r,q){return r-q<=b;},p,i,d,l;n.setStyles({overflow:"hidden",position:"absolute",visibility:"hidden",display:"block",bottom:"-10px",right:"-10px",width:j.getComputedStyle("width"),fontSize:j.getComputedStyle("fontSize"),fontFamily:j.getComputedStyle("fontFamily"),fontWeight:j.getComputedStyle("fontWeight"),letterSpacing:j.getComputedStyle("letterSpacing"),});n.set("text","some sample text");a.one("body").append(n);p=parseFloat(n.getComputedStyle("height"),10);n.setStyle("overflow","visible");i=k.lines*p;n.set("text",g);d=parseFloat(n.getComputedStyle("height"),10);if((o(d,i)||m(d,i))&&g.length===j.get("text").length){n.remove();return;}for(;f>=1;){f=Math.floor(f/2);h+=c(d,i)?-f:+f;n.set("text",g.slice(0,h-k.ellipsis.length)+k.ellipsis);d=parseFloat(n.getComputedStyle("height"),10);if(m(d,i)||o(d,i)){l=h;}}n.remove();if(!j.getAttribute("originalText")){j.setAttribute("originalText",g);}if(g.length===(n.get("text").length-k.ellipsis.length)){j.set("text",g);}else{if("undefined"!==typeof l){j.set("text",g.slice(0,l-k.ellipsis.length-k.fudge)+k.ellipsis);}}return j;};a.Node.importMethod(a.DOM,"ellipsis");a.NodeList.importMethod(a.Node.prototype,"ellipsis");},"@VERSION@",{requires:["base","node"]});